<!DOCTYPE html>
<html>

<head>
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <div id="video-compare-container">
    <video loop autoplay poster="https://bartoszek.github.io/sinterite/v1.png">
    <source src=https://bartoszek.github.io/sinterite/s1_i3_v1.mp4>
  </video>
    <div id="video-clipper">
      <video loop autoplay poster="https://bartoszek.github.io/sinterite/v2.png">
      <source src=https://bartoszek.github.io/sinterite/s1_i3_v2.mp4>
    </video>
    </div>
  </div>
  <script>
  function trackLocation(e) {
    var rect = videoContainer.getBoundingClientRect(),
        position = ((e.pageX - rect.left) / videoContainer.offsetWidth)*100;
    if (position <= 100) {
      videoClipper.style.width = position+"%";
      clippedVideo.style.width = ((100/position)*100)+"%";
      clippedVideo.style.zIndex = 3;
  	}
  }
  var videoContainer = document.getElementById("video-compare-container"),
  videoClipper = document.getElementById("video-clipper"),
  clippedVideo = videoClipper.getElementsByTagName("video")[0];
  videoContainer.addEventListener( "mousemove", trackLocation, false);
  videoContainer.addEventListener("touchstart",trackLocation,false);
  videoContainer.addEventListener("touchmove",trackLocation,false);
  for(var ell in document.querySelectorAll('video')){
    ell.playbackRate = .5;
  }

  </script>
</body>

</html>
