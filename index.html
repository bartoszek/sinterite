<!DOCTYPE html>
<html>

<head>
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <div id="video-compare-container">
    <video loop autoplay poster="https://s3-us-west-2.amazonaws.com/s.cdpn.io/4273/dirty.jpg">
    <source src=https://s3-us-west-2.amazonaws.com/s.cdpn.io/4273/floodplain-dirty.mp4>
    <source src=https://s3-us-west-2.amazonaws.com/s.cdpn.io/4273/floodplain-dirty.webm>
  </video>
    <div id="video-clipper">
      <video loop autoplay poster="https://s3-us-west-2.amazonaws.com/s.cdpn.io/4273/clean.jpg">
      <source src=https://s3-us-west-2.amazonaws.com/s.cdpn.io/4273/floodplain-clean.mp4>
      <source src=https://s3-us-west-2.amazonaws.com/s.cdpn.io/4273/floodplain-clean.webm>
    </video>
    </div>
  </div>
  <script>
  function trackLocation(e) {
    var rect = videoContainer.getBoundingClientRect(),
        position = ((e.pageX - rect.left) / videoContainer.offsetWidth)*100;
    if (position <= 100) {
      videoClipper.style.width = position+"%";
      clippedVideo.style.width = ((100/position)*100)+"%";
      clippedVideo.style.zIndex = 3;
  	}
  }
  var videoContainer = document.getElementById("video-compare-container"),
  videoClipper = document.getElementById("video-clipper"),
  clippedVideo = videoClipper.getElementsByTagName("video")[0];
  videoContainer.addEventListener( "mousemove", trackLocation, false);
  videoContainer.addEventListener("touchstart",trackLocation,false);
  videoContainer.addEventListener("touchmove",trackLocation,false);
  </script>
</body>

</html>
